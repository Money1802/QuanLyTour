@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    var tour = ViewBag.Tour as TourDemo.Models.ModelViews.TourView;
    var user = ViewBag.Customer as KhachHang;
    var so = Convert.ToDecimal(ViewData["so"]);
}
@model TourDemo.Models.ModelViews.ThanhToan

@using (Html.BeginForm())
{
    <div class="row" style="margin-top: 20px">
        <div class="col-md-8">
            <div class="card w-100">
                <div class="card-body p-4">
                    <div asp-validation-summary="All" class="text-danger"></div>
                    <h5 class="card-title fw-semibold mb-4">THÔNG TIN NGƯỜI ĐẶT</h5>
                    <div class="row">
                        <div class="col-md-6 form-group mb-3">
                            <label>Họ và tên *</label>
                            <input asp-for="KhachHang.HoTen" class="form-control" />
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label>Email *</label>
                            <input asp-for="KhachHang.Email" class="form-control" />
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label>Số điện thoại * </label>
                            <input asp-for="KhachHang.Dienthoai" class="form-control" />
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label>Địa chỉ *</label>
                            <input asp-for="KhachHang.Diachi" class="form-control" />
                        </div>
                    </div>
                    <h5 class="card-title fw-semibold mb-4">THÔNG TIN ĐƠN HÀNG</h5>
                    <div class="row">
                        <div class="col-md-6 form-group mb-3">
                            <label>Chọn ngày đi *</label>
                            <input asp-for="DatTour.Ngaykhoihanh" type="date" class="form-control" />
                        </div>
                        <div class="col-md-6 form-group mb-3">
                            <label>Số người *</label>
                            @Html.TextBoxFor(m=>so, new { @class="form-control", @type="number" })
                        </div>
                    </div>
                    @if (Model.ChiTietDatTours != null)
                    {
                        <h5 class="card-title fw-semibold mb-4">THÔNG TIN HÀNH KHÁCH</h5>
                        for (int i = 0; i < Model.ChiTietDatTours.Count(); i++)
                        {
                            <div class="row">
                                <div class="col-md-12 form-group mb-3">
                                    <h6> Hành khách thứ #@(i + 1) </h6>
                                </div>
                                <div class="col-md-6 form-group mb-3">
                                    <label>Họ và tên </label>
                                    <input asp-for="ChiTietDatTours[i].Hoten" class="form-control" />
                                </div>
                                <div class="col-md-6 form-group mb-3">
                                    <label>Email </label>
                                    <input asp-for="ChiTietDatTours[i].Email" class="form-control" />
                                </div>
                                <div class="col-md-6 form-group mb-3">
                                    <label>Số điện thoại </label>
                                    <input asp-for="ChiTietDatTours[i].Dienthoai" class="form-control" />
                                </div>
                                <div class="col-md-6 form-group mb-3">
                                    <label>Địa chỉ </label>
                                    <input asp-for="ChiTietDatTours[i].Diachi"  class="form-control" />
                                </div>
                            </div>
                        }

                        @if (Model.ChiTietDatTours.Count > 0)
                        {
                            <h5 class="card-title fw-semibold mb-4">THÔNG TIN THANH TOÁN</h5>
                            <div class="row">
                                <div class="col-md-12 form-group mb-3">
                                    <select asp-for="DatTour.Loaithanhtoan" class="form-control" asp-items="@(new SelectList(ViewBag.LoaiTTs, "Value", "Text"))">
                                    </select>
                                </div>
                            </div>
                        }
                    }
                    <div class="row">
                        <div class="col-md-12"> <button type="submit" class="btn btn-primary"> Tiếp tục </button> </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4 row">
            <div class="col-md-12">
                <div class="card overflow-hidden rounded-2">
                    <div class="position-relative">
                        <a><img src="@tour.Hinhanh" class="card-img-top rounded-0" height="200" alt="..."></a>
                        @*<a asp-area="" asp-controller="Home" asp-action="Cart" asp-route-id="@item.Matour" class="bg-primary rounded-circle p-2 text-white d-inline-flex position-absolute bottom-0 end-0 mb-n3 me-3" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Add To Cart"><i class="ti ti-basket fs-4"></i></a>*@
                    </div>
                    <div class="card-body pt-3 p-4">
                        <h5 class="fw-semibold fs-4">@tour.Tentour</h5>
                        <h6 class="fw-semibold fs-4 mb-0">
                            @(string.Format("{0:C}", Math.Round(tour.Giagiam)).Replace("$", "")) VNĐ <span class="ms-2 fw-normal text-muted fs-3">
                                @if (tour.Giatour != tour.Giagiam)
                                {
                                    <del>@(string.Format("{0:C}", Math.Round(tour.Giatour)).Replace("$", "")) VNĐ</del>
                                }
                            </span>
                        </h6>
                        <ul class="list-unstyled d-flex align-items-center mb-0">
                            <li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li>
                            <li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li>
                            <li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li>
                            <li><a class="me-1" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li>
                            <li><a class="" href="javascript:void(0)"><i class="ti ti-star text-warning"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div class="card">
                    <div class="card-body p-4">
                        <h5 class="card-title fw-semibold mb-4">TỔNG TIỀN</h5>
                        <p> @(string.Format("{0:C}", Math.Round((tour.Giagiam * so))).Replace("$", ""))</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

}